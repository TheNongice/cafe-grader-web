- content_for :head do
  = stylesheet_link_tag 'problems'
%h1 Problems
%p
  = link_to 'Import problems', {:action => 'import'}, class: 'btn btn-success btn-sm'
  = link_to 'New problem', new_problem_path, class: 'btn btn-success btn-sm'
  = link_to 'Bulk Manage', { action: 'manage'}, class: 'btn btn-info btn-sm'
  = link_to 'Turn off all problems', {:action => 'turn_all_off'}, class: 'btn btn-secondary btn-sm'
  = link_to 'Turn on all problems', {:action => 'turn_all_on'}, class: 'btn btn-secondary btn-sm'
%table.table.table-condense.table-hover
  %thead
    %th Name
    %th Full name
    %th.text-end #Dataset (#testcases)
    %th Tags
    %th
      Submit
      %sup{class: 'text-primary',data: {toggle: 'tooltip'}, title: 'Admin can always submit to any problem' } [?]
    %th Date added
    %th.text-center
      Avail?
      %sup{class: 'text-primary',data: {toggle: 'tooltip'}, title: 'Let user submits to this problem?' } [?]
    %th.text-center
      View Data?
      %sup{class: 'text-primary',data: {toggle: 'tooltip'}, title: 'Let user view the testcase of this problem?' } [?]
    - if GraderConfiguration.multicontests?
      %th Contests
    %th.text-center
    %th.text-center
    %th.text-center
  - for problem in @problems
    %tr{:class => "#{(problem.available) ? "bg-success bg-opacity-25" : "bg-opacity-25"}", :id => "prob-#{problem.id}", :name => "prob-#{problem.id}"}
      - @problem=problem
      %td= problem.name
      %td
        = problem.full_name
        = link_to_description_if_any "[#{t 'main.problem_desc'}] <span class='glyphicon glyphicon-file'></span>".html_safe, problem
      %td.text-end= "#{problem.dataset_count} (#{problem.tc_count})"
      %td
        - problem.tags.each do |t|
          - #%button.btn.btn-default.btn-sm= t.name
          %span.badge.text-bg-secondary.bg-opacity-100= t.name
      %td= link_to "Submit", direct_edit_problem_submissions_path(problem,@current_user.id), class: 'btn btn-sm btn-primary'
      %td= problem.date_added
      %td= toggle_button(@problem.available?, toggle_problem_path(@problem), "problem-avail-#{@problem.id}")
      %td= toggle_button(@problem.view_testcase?, toggle_view_testcase_problem_path(@problem), "problem-view-testcase-#{@problem.id}")
      - if @multi_contest
        %td
          = problem.contests.collect { |c| c.name }.join(', ')
      %td= link_to 'Stat', {:action => 'stat', :id => problem.id}, class: 'btn btn-info btn-sm btn-block'
      %td= link_to 'Edit', {:action => 'edit', :id => problem}, class: 'btn btn-info btn-sm btn-block'
      %td= link_to 'Destroy', { :action => 'destroy', :id => problem }, :confirm => 'Are you sure?', :method => :delete, class: 'btn btn-danger btn-sm btn-block'
%br/
