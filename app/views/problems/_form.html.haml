.row
  .col-md-5
    .card
      .card-body
        = simple_form_for problem, wrapper: :horizontal_form do |form|
          %h4 Basic Information
          = form.input :name
          = form.input :full_name
          = form.input :tag_ids, collection: Tag.all, input_html: {class: 'select2', multiple: true}, wrapper: :horizontal_form
          = form.input :date_added, wrapper: :horizontal_form
          = form.input :available, wrapper: :horizontal_boolean
          = form.input :test_allowed, wrapper: :horizontal_boolean
          = form.input :output_only, wrapper: :horizontal_boolean
          %h4 Statements
          = form.input :statement, wrapper: :horizontal_file
          .row
            .col-md-3
            .col-md-9
              %p
                - if @problem.statement.attached?
                  %a{href: get_statement_problem_path(@problem)} [Download current Statement]
                - else
                  no statement attached to this problem
          = form.input :description, as: :text
          = form.input :markdown, wrapper: :horizontal_boolean
          = form.input :url
          = form.button :submit, class: 'btn btn-primary'
  .col-md-7
    .card
      .card-body
        %h4 Datasets
        %ul.nav.nav-tabs
          %li.nav-item
            %button.nav-link{href: '#', class: 'active', data: {bs: {toggle: :tab, target: "#dataset"}}} Dataset
          %li.nav-item
            %button.nav-link{href: '#', data: {bs: {toggle: :tab, target: "#upload"}}} Import
        .tab-content
          %div#dataset.tab-pane.fade.show.active.mb-2
            %div.mb-2
            = render partial: "datasets/form", locals: {ds: @problem.live_dataset}
          %div#upload.tab-pane.fade
            %div.mb-2
            = render partial: "ds_import", locals: {problem: @problem}
:javascript
  $(document).on('import-map-loaded',function(e) {
    $('.datatable').DataTable({destroy: true, searching: false, paging: false})
    $('.select2').select2()
  });
